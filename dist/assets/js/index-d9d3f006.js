var h=(r,m,a)=>new Promise((o,p)=>{var b=t=>{try{i(a.next(t))}catch(e){p(e)}},v=t=>{try{i(a.throw(t))}catch(e){p(e)}},i=t=>t.done?o(t.value):Promise.resolve(t.value).then(b,v);i((a=a.apply(r,m)).next())});import{d as I,u as B,aJ as F,bb as S,aK as U,bd as E,be as N,b3 as $,bf as D,o as _,f as w,g as f,i as n,w as l,F as R,r as q,j as A,b6 as C,aU as g,l as L,C as M,D as j,_ as J}from"./index-c3904695.js";/* empty css                     *//* empty css                  *//* empty css                 */import{u as k,k as K}from"./index-fe386976.js";import{u as O}from"./index-11a757ea.js";const T=r=>(M("data-v-0aade636"),r=r(),j(),r),z={class:"bind-wrap"},G={class:"content"},H=T(()=>f("div",{class:"header"},"账号绑定",-1)),P={class:"inp-wrap"},Q={class:"actions"},W=I({__name:"index",setup(r){const m=B(),a=F(),o=S({domains:[],bindAccount:""});U(()=>{i()});const p=t=>{const e=o.domains.indexOf(t);e!==-1&&o.domains.splice(e,1)},b=()=>{o.domains.push({key:O(),value:""})},v=t=>{t&&t.validate(e=>h(this,null,function*(){var d;if(e){const c=o.domains.map(s=>s.value),u=[o.bindAccount,...c];(yield K.bindAccount({usernames:u}))&&((d=k.bindAccount)!=null&&d.length)&&m.push("/home")}else return!1}))},i=()=>h(this,null,function*(){var e;if(!((e=k)!=null&&e.userId))return;const t=yield k.getUserInfo();t!=null&&t.length&&m.push("/home")});return(t,e)=>{const d=E,c=N,u=$,x=D;return _(),w("div",z,[f("div",G,[H,n(x,{ref_key:"formRef",ref:a,model:o,"label-width":"110px",class:"form-wrap",onSubmit:e[2]||(e[2]=C(()=>{},["prevent"]))},{default:l(()=>[n(c,{prop:"bindAccount",label:"绑定账号名 1",rules:[{required:!0,message:"请输入需要绑定的前台账号名称",trigger:"blur"}],class:"form-item"},{default:l(()=>[n(d,{modelValue:o.bindAccount,"onUpdate:modelValue":e[0]||(e[0]=s=>o.bindAccount=s),placeholder:"请输入需要绑定的前台账号名称"},null,8,["modelValue"])]),_:1}),(_(!0),w(R,null,q(o.domains,(s,y)=>(_(),A(c,{key:s.key,label:`绑定账号名${y+2}`,prop:`domains.${y}.value`,rules:{required:!0,message:"请输入需要绑定的前台账号名称",trigger:"blur"},class:"form-item-custom"},{default:l(()=>[f("div",P,[n(d,{modelValue:s.value,"onUpdate:modelValue":V=>s.value=V,placeholder:"请输入需要绑定的前台账号名称"},null,8,["modelValue","onUpdate:modelValue"]),n(u,{class:"del-btn",link:"",onClick:C(V=>p(s),["prevent"])},{default:l(()=>[g("删除")]),_:2},1032,["onClick"])])]),_:2},1032,["label","prop"]))),128)),n(c,{class:"form-item-action"},{default:l(()=>[f("div",Q,[n(u,{type:"primary",class:"action-btn",onClick:e[1]||(e[1]=s=>v(a.value))},{default:l(()=>[g("确定")]),_:1}),o.domains.length<4?(_(),A(u,{key:0,class:"action-btn",onClick:b},{default:l(()=>[g(" 增加绑定账号 ")]),_:1})):L("",!0)])]),_:1})]),_:1},8,["model"])])])}}});const ae=J(W,[["__scopeId","data-v-0aade636"]]);export{ae as default};
