import{aO as h,aP as p,aQ as y,aR as M,aS as w,aT as b}from"./index-c3904695.js";const E=(e,t="YYYY/MM/DD HH:mm:ss")=>{if(e)return h(e).format(t)},R=e=>{const t=Date.now()-e,n=Math.round(t/1e3),s=Math.round(t/6e4),r=Math.round(t/36e5),a=Math.round(t/864e5),c=Math.round(t/2592e6),i=Math.round(t/31104e6);switch(!0){case n<60:return"刚刚";case s<60:return`${s} 分钟前`;case r<24:return`${r} 小时前`;case a<30:return`${a} 天前`;case c<12:return`${c} 月前`;default:return`${i} 年前`}},_=(e,t,n=20)=>{var c;const s=(c=e.value)==null?void 0:c.wrapRef;window.requestAnimationFrame||(window.requestAnimationFrame=i=>setTimeout(i,n));let r=s.scrollTop;const a=()=>{const i=t-r;r=r+i/5,Math.abs(i)<1?s.scrollTop=t:(s.scrollTop=r,requestAnimationFrame(a))};requestAnimationFrame(a)},$=e=>{const t=e.replace(/\n/g,"<br/>");return C(t)},C=e=>(e=e.replace(/\[[^[^\]]+]/g,t=>M.indexOf(t)>-1?`<img style="vertical-align: middle;width: 32px;height: 32px" src="${p+y[t]}" alt="" title="${t}"/>`:t),S(e)),S=e=>(e=e.replace(/<[^<^>]+>/g,t=>{if(t.indexOf(",")>-1){const s=t.replace("<","").replace(">","").split(",");return`
        <img
          id="__COMMENT_IMG__"
          style="border-radius: 5px;
          width: 100%;
          max-width: 250px;
          height:auto;
          display: block;
          padding: 5px 0;
          cursor: pointer;
          -webkit-user-drag: none;
          user-select: none;"
          src="${s[1]}"
          title="${s[0]}"
          alt=""
        />
      `}else return t}),A(e)),A=e=>T(e)?`<a style="color: #2b7de7; cursor: pointer; word-break: break-all;">${e}</a>`:e,O=e=>new Promise((t,n)=>{const s=new FileReader;s.readAsBinaryString(e),s.onload=r=>{const a=r.target.result;e.size===(a==null?void 0:a.length)?t(w.hashBinary(a)):n(new Error("读取出错了"))},s.onerror=()=>n(new Error("读取出错了"))}),z=e=>!e.includes("data:image"),T=e=>{const t=/^(https?:\/\/)?(([0-9a-z.]+\.[a-z]+)|(([0-9]{1,3}\.){3}[0-9]{1,3}))(:[0-9]+)?(\/[0-9a-z%/.\-_]*)?(\?[0-9a-z=&%_-]*)?(#[0-9a-z=&%_-]*)?/gi;return new RegExp(t).test(e)},P=e=>{const t={},n=[];for(let i=0;i<e.length;i++){const o=e[i];t[o.year]||(t[o.year]=[]),!n.includes(o.year)&&o.year&&n.push(o.year),t[o.year].push(o)}for(const i in t)t[i].sort(function(o,x){return parseInt(o.month)-parseInt(x.month)});const s=Object.keys(t);for(let i=0;i<s.length;i++){const o=s[i],x=t[o],g=Array.from({length:12},(l,f)=>f+1);for(let l=0;l<g.length;l++){const f=g[l].toString().padStart(2,"0");x.find(d=>d.month===f)||t[o].push({count:0,year:o,month:f})}t[o].sort((l,f)=>parseInt(l.month)-parseInt(f.month))}let r=-1/0,a={title:"",readCount:0};e.forEach(i=>{i.articleInfo.forEach(o=>{o.readCount&&o.readCount>r&&(r=o.readCount,a=o)})});let c=0;for(const i in t)for(let o=0;o<t[i].length;o++)c+=t[i][o].count;return{dataSource:t,years:n,maxArticle:a,totalCount:c}},D=e=>/^((?!\\|\/|\(|\)|\+|-|=|~|～|`|!|！|:|\*|\?|<|>|\||'|%|#|&|\$|\^|&|\*).){1,20}$/.test(e)?{msg:"",status:!0}:e.length<1?{msg:"用户名不能少于1位",status:!1}:e.length>15?{msg:"用户名不能大于15位",status:!1}:{msg:"用户名不能包含特殊字符",status:!1},j=e=>{const t=/(?=.*[0-9])(?=.*[a-zA-Z])(?=.*[^a-zA-Z0-9]).{8,20}/;return e.length>20?{msg:"密码不能不大于20位",status:!1}:e.length<8?{msg:"密码不能少于8位",status:!1}:t.test(e)?{msg:"",status:!0}:{msg:"必须包含字母、数字、特称字符",status:!1}},H=(e,t)=>{const n=/(?=.*[0-9])(?=.*[a-zA-Z])(?=.*[^a-zA-Z0-9]).{8,20}/;return e.length>20?{msg:"密码不能不大于20位",status:!1}:e.length<8?{msg:"密码不能少于8位",status:!1}:e!==t?{msg:"两次输入的密码不一致",status:!1}:n.test(e)?{msg:"",status:!0}:{msg:"必须包含字母、数字、特称字符",status:!1}},F=(e,t)=>e.toLowerCase()===t.toLowerCase()?{msg:"",status:!0}:{msg:"验证码输入错误",status:!1},L=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)}),m=(e,t)=>{const n=u(e,t),s=u(e,t),r=u(e,t);return"rgb("+n+","+s+","+r+")"},u=(e,t)=>Math.floor(Math.random()*(t-e)+e),N=({canvasElement:e,width:t,height:n,code:s})=>{const r=e==null?void 0:e.getContext("2d");r.fillStyle=m(180,255),r.fillRect(0,0,t,n),r.textBaseline="middle",r.textAlign="center",r.fillRect(0,0,t,n),r.font="32px sans-serif",r.fillStyle=m(0,255),r.fillText(s,t/2,n/2+3);for(let a=0;a<b;a++)r.strokeStyle=m(30,180),r.beginPath(),r.moveTo(u(0,t),u(0,n)),r.lineTo(u(0,t),u(0,n)),r.stroke();for(let a=0;a<30;a++)r.fillStyle=m(0,255),r.beginPath(),r.arc(u(0,t),u(0,n),1,0,2*Math.PI),r.fill();return s},q=e=>new Promise((t,n)=>{const s=new Image;s.crossOrigin="*",s.onload=function(){const r=s.width,a=s.height;t({width:r,height:a})},s.onerror=function(){n(new Error("图片加载失败"))},s.src=e});export{P as a,R as b,z as c,T as d,j as e,E as f,q as g,H as h,F as i,N as j,O as m,$ as r,_ as s,L as u,D as v};
